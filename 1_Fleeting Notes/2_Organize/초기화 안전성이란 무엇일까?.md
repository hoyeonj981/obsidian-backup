created at : 2024-02-08 03:25

#### tags

#CS #Java 

--- 

- 초기화 안전성
	- 올바르게 생성된 블변 객체를 어떻게 사용하던 동기화 구문 없이 안전하게 사용할 수 있다.
		- 하나의 객체를 여러 곳에서 사용할 때 매우 유용할 듯.
		- VO를 생성할 때 고려해야할 기법인 것 같다.
	- 그냥 final이나 String 같은 불변을 보장하는 객체 사용하면 되는 것 아닌가?
		- string도 안전한 초기화 안전성을 확보하지 못하면 버그가 생긴다. (특히 보안관련을 String으로 기록할 경우 문제가 됨)
- final을 사용하면 된다. 왜 어떻게 동작하길래?
	- final은 참조를 생성하는 과정에서 reordering이 발생하지 않는다.
	- final 변수에 write하는 작업과 read하는 작업은 항상 init() 메서드가 종료된 후에 작업할 수 있다.
		- 최소한 여러 쓰레드가 접근할 때 이미 생성된 객체에 접근하는다는 뜻 (NPE는 걱정할 필요가 없다)
- 그렇다면 final로 선언된 객체 안에 있는 객체들
	- 이것도 다른 쓰레드가 안전하게 볼 수 있는 것을 보장함.
	- final class 안에 final 객체가 또 있을 텐데 이것도 초기화 과정에서 reordering이 발생하지 않는다.
	- final을 통해서 초기화 안전성을 얻고 싶다면 내부의 모든 변수가 final이어야 한다.

### References
---
[]()
JCIP p.504